@model List<MultiShop.WebUI.Dtos.CatalogDtos.CategoryDtos.ResultCategoryDto>

<!-- Navbar Start -->
<div class="container-fluid bg-dark mb-30">
	<div class="row px-xl-5">
		<div class="col-lg-3 d-none d-lg-block">
			<a class="btn d-flex align-items-center justify-content-between bg-primary w-100" data-toggle="collapse" href="#navbar-vertical" style="height: 65px; padding: 0 30px;">
				<h6 class="text-dark m-0"><i class="fa fa-bars mr-2"></i>Categories</h6>
				<i class="fa fa-angle-down text-dark"></i>
			</a>
			<nav class="collapse position-absolute navbar navbar-vertical navbar-light align-items-start p-0 bg-light" id="navbar-vertical" style="width: calc(100% - 30px); z-index: 999;">
				<div class="navbar-nav w-100">
					@if (Model != null && Model.Any())
					{
						@foreach (var category in Model)
						{
							<a href="/ProductList/Index/@category.CategoryId" class="nav-item nav-link">@category.CategoryName</a>
						}
					}
					else
					{
						<a href="#" class="nav-item nav-link">No Categories Found</a>
					}
				</div>
			</nav>
		</div>
		<div class="col-lg-9">
			<nav class="navbar navbar-expand-lg bg-dark navbar-dark py-3 py-lg-0 px-0">
				<a href="/" class="text-decoration-none d-block d-lg-none">
					<span class="h1 text-uppercase text-dark bg-light px-2">Multi</span>
					<span class="h1 text-uppercase text-light bg-primary px-2 ml-n1">Shop</span>
				</a>
				<button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbarCollapse">
					<span class="navbar-toggler-icon"></span>
				</button>
				<div class="collapse navbar-collapse justify-content-between" id="navbarCollapse">
					<div class="navbar-nav mr-auto py-0">
						<a href="/Home/Index/" class="nav-item nav-link">Home</a>
						<a href="/ProductList" class="nav-item nav-link">Products</a>
						<a href="" class="nav-item nav-link">Product Detail</a>
						<a href="" class="nav-item nav-link">Deal of the Day</a>
						<a href="/Contact" class="nav-item nav-link">Contact</a>
						<div class="nav-item dropdown">
							<a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Pages <i class="fa fa-angle-down mt-1"></i></a>
							<div class="dropdown-menu bg-primary rounded-0 border-0 m-0">
								<a href="/Basket" class="dropdown-item">Shopping Cart</a>
								<a href="/Checkout" class="dropdown-item">Checkout</a>
								<a href="/Register" class="dropdown-item">Sign Up</a>
								<a href="/Login" class="dropdown-item">Sign In</a>
							</div>
						</div>
					</div>
					<div class="navbar-nav ml-auto py-0 d-none d-lg-block">
						<a href="/Wishlist" class="btn px-0">
							<i class="fas fa-heart text-primary"></i>
							<span class="badge text-secondary border border-secondary rounded-circle" style="padding-bottom: 2px;">0</span>
						</a>
						<a href="/Basket" class="btn px-0 ml-3">
							<i class="fas fa-shopping-cart text-primary"></i>
							<span class="badge text-secondary border border-secondary rounded-circle" style="padding-bottom: 2px;">0</span>
						</a>
						@{
							var firstName = User?.FindFirst("given_name")?.Value ?? User?.FindFirst(System.Security.Claims.ClaimTypes.GivenName)?.Value ?? string.Empty;
							var lastName = User?.FindFirst("family_name")?.Value ?? User?.FindFirst(System.Security.Claims.ClaimTypes.Surname)?.Value ?? string.Empty;
							var fallbackName = User?.FindFirst("name")?.Value ?? User?.Identity?.Name ?? string.Empty;
							var composed = ($"{firstName} {lastName}").Trim();
							var displayName = string.IsNullOrWhiteSpace(composed) ? fallbackName : composed;
							if (string.IsNullOrWhiteSpace(displayName)) { displayName = "Account"; }
						}
						<div class="nav-item dropdown d-inline-block ml-3">
							<a href="#" class="btn px-0 nav-link dropdown-toggle" data-toggle="dropdown">
								<i class="fas fa-user text-primary"></i>
								<span class="text-light ml-2">@displayName</span>
							</a>
							<div class="dropdown-menu dropdown-menu-right bg-primary rounded-0 border-0 m-0">
								@if (User?.Identity?.IsAuthenticated ?? false)
								{
									<a class="dropdown-item text-dark" href="/User">Profile</a>
									<a class="dropdown-item text-dark" href="/User/ChangePassword">Change Password</a>
									<a class="dropdown-item text-dark" href="/Login/Logout">Logout</a>
								}
								else
								{
									<a class="dropdown-item text-dark" href="/Login">Sign In</a>
									<a class="dropdown-item text-dark" href="/Register">Sign Up</a>
								}
							</div>
						</div>
					</div>
				</div>
			</nav>
		</div>
	</div>
</div>
<!-- Navbar End -->

