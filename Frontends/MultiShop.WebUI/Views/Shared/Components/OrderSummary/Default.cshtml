@model MultiShop.WebUI.Dtos.BasketDtos.BasketTotalDto
<div class="bg-light p-30 mb-5">
    <div class="border-bottom">
        <h6 class="mb-3">Products</h6>
        @if (Model?.BasketItems != null && Model.BasketItems.Any())
        {
            foreach (var item in Model.BasketItems)
            {
                <div class="d-flex justify-content-between">
                    <p>@item.ProductName x @item.Quantity</p>
                    <p>@String.Format("{0:C}", item.Price * item.Quantity)</p>
                </div>
            }
        }
        else
        {
            <div class="d-flex justify-content-between">
                <p>No items in basket</p>
                <p>$0</p>
            </div>
        }
    </div>
    <div class="border-bottom pt-3 pb-2">
        <div class="d-flex justify-content-between mb-3">
            <h6>Subtotal</h6>
            <h6>@String.Format("{0:C}", Model?.TotalPrice ?? 0m)</h6>
        </div>
        @if (Model?.DiscountRate != null && Model.DiscountRate.HasValue && Model.DiscountRate.Value > 0)
        {
            var discountAmount = (Model.TotalPrice * Model.DiscountRate.Value) / 100m;
            <div class="d-flex justify-content-between">
                <h6 class="font-weight-medium">Discount (@Model.DiscountRate%)</h6>
                <h6 class="font-weight-medium">-@String.Format("{0:C}", discountAmount)</h6>
            </div>
        }
    </div>
    <div class="pt-2">
        <div class="d-flex justify-content-between mt-2">
            <h5>Total</h5>
            @{
                var total = Model?.TotalPrice ?? 0m;
                if (Model?.DiscountRate != null && Model.DiscountRate.HasValue && Model.DiscountRate.Value > 0)
                {
                    total = total - ((Model.TotalPrice * Model.DiscountRate.Value) / 100m);
                }
            }
            <h5>@String.Format("{0:C}", total)</h5>
        </div>
    </div>
</div>